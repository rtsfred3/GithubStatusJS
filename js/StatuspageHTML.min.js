class StatuspageHTMLElements{static get ErrorHTMLElement(){return StatuspageHTMLElements.StatusHTMLElement(StatuspageHTMLElements.GetStatusJson("error"),!0)}static get LoadingHTMLElement(){return StatuspageHTMLElements.StatusHTMLElement(StatuspageHTMLElements.GetStatusJson("loading"),!0)}static get AppHTMLElement(){const a=document.createElement("div");return a.setAttribute("id","app"),a}static GetStatusJson(a){return{status:{indicator:a}}}static StatusHTMLElement(a,b=!1){if("string"!=typeof a&&"object"!=typeof a)return console.error(`Invaid parameter - ${typeof a}`),document.createElement("div");if("object"==typeof a&&"status"in a&&"indicator"in a.status)return StatuspageHTMLElements.StatusHTMLElement(a.status.indicator,b);var c=b?["full-status-height"]:["status-height","status-shadow"],d=c.concat(["min","center-status","status-width","bold","status-color",a.toLowerCase()]);const e=document.createElement("div");return e.setAttribute("data-status",a.toLowerCase()),e.setAttribute("data-background",StatuspageDictionary.MetaColors[a.toLowerCase()]),e.setAttribute("id","status"),e.classList.add(...d),e}static SingleComponentHTMLElement(a){const b=document.createElement("div");b.setAttribute("id",a.id),b.classList.add("component-height","status-width","bold","status-color",StatuspageDictionary.IndicatorVals[a.status]);const c=document.createElement("span");return c.classList.add("center-status"),c.appendChild(document.createTextNode(a.name)),b.appendChild(c),b}static ComponentsHTMLElement(a){var b=[];if(!("object"==typeof a&&"components"in a))return b;for(var c=0;c<a.components.length;c++)"Visit"!=a.components[c].name.substring(0,5)&&b.push(StatuspageHTMLElements.SingleComponentHTMLElement(a.components[c]));return b}static MessageHTMLElement(a,b,c,d,e,f,g,h,i){var j={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},k="resolved"==d?"good":c;null==k&&(k=StatuspageDictionary.IndicatorMessages[d]);var l=new Date(f).toLocaleDateString("en-US",j);if(i){j={month:"short",day:"2-digit",hour:"numeric",minute:"numeric"};var m=new Date(f);m=Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours()+m.getTimezoneOffset()/60,m.getUTCMinutes(),m.getUTCSeconds()),l=new Date(m).toLocaleDateString("en-US",j)+" UTC"}const n=document.createElement("span");n.setAttribute("id",a);const o=document.createElement("div");o.classList.add("status-box","message-status",`${k}-message`),o.setAttribute("data-impact",k);const p=document.createElement("div");p.classList.add("text-margin"),p.appendChild(document.createTextNode(e)),p.appendChild(document.createElement("br"));const q=document.createElement("span");return q.classList.add("date","empty"),q.appendChild(document.createTextNode(l)),p.appendChild(q),n.appendChild(o),n.appendChild(p),n}static IncidentsHTMLElements(a,b=7,c=!1){var d=new Date;d.setHours(0,0,0);var e=d.setDate(new Date().getDate()-b),f=0==b?a.incidents:a.incidents.filter(function(a){return new Date(a.created_at)>e}),g=document.createElement("div");if(g.setAttribute("id","messages"),g.classList.add("messages"),0==f.length){const b=document.createElement("div");b.classList.add("empty","padding-none");const c=document.createElement("div"),d=document.createElement("div");c.classList.add("font-36","margin-bottom"),d.classList.add("font-12"),c.appendChild(document.createTextNode("All good.")),d.appendChild(document.createTextNode(`Nothing to see here folks. Looks like ${a.page.name} is up and running and has been stable for quite some time.`)),d.appendChild(document.createElement("br")),d.appendChild(document.createElement("br")),d.appendChild(document.createTextNode("Now get back to work!")),b.appendChild(c),b.appendChild(d),g.appendChild(b)}else for(var h=0;h<f.length;h++)if(0<f[h].incident_updates.length){const b=document.createElement("span");b.setAttribute("id",f[h].id);for(var k=0;k<f[h].incident_updates.length;k++)b.appendChild(StatuspageHTMLElements.MessageHTMLElement(f[h].incident_updates[k].id,f[h].name,f[h].impact,f[h].incident_updates[k].status,f[h].incident_updates[k].body,f[h].incident_updates[k].created_at,a.incidents[h].shortlink,k==f[h].incident_updates.length-1,c));g.appendChild(b)}return g}}class StatuspageDictionary{static get replaceableStringValue(){return"{}"}static get _metaColors(){return class{constructor(){this.none="#339966",this.minor="#DBAB09",this.major="#E25D10",this.critical="#DC3545",this.unavailable="#4F93BD",this.error="#646464",this.maintenance="#0366D6",this.psa="#D83D42",this.good=this.none,this.under_maintenance=this.maintenance,this.loading=this.unavailable,this.operational=this.good,this.degraded_performance=this.minor,this.partial_outage=this.major,this.major="#e36209"}}}static get _indicatorVals(){return class{constructor(){this.good="good",this.minor="minor",this.major="major",this.critical="critical",this.error="error",this.maintenance="maintenance",this.unavailable="unavailable",this.loading="loading",this.resolved=this.good,this.none=this.good,this.operational=this.good,this.degraded_performance=this.minor,this.partial_outage=this.major,this.major_outage=this.critical,this.under_maintenance=this.maintenance}}}static get _indicatorMessages(){return class{constructor(){var a=new StatuspageDictionary._indicatorVals;this.resolved=a.good,this.investigating=a.minor,this.critical=a.critical,this.maintenance=a.maintenance}}}static get MetaColors(){return JSON.parse(JSON.stringify(new StatuspageDictionary._metaColors))}static get IndicatorVals(){return JSON.parse(JSON.stringify(new StatuspageDictionary._indicatorVals))}static get IndicatorMessages(){return JSON.parse(JSON.stringify(new StatuspageDictionary._indicatorMessages))}}class StatuspageHTML{constructor(a,b=7,c=!0,d=!1){this.settings_baseUrl=a,this.settings_previousDays=b,this.settings_indexHomeSingleRequest=c,this.settings_displayUTCTime=d,this.site_name=null,this.site_description=null,this.site_title=null,"/"==this.settings_baseUrl.slice(-1)&&(this.settings_baseUrl=this.settings_baseUrl.substring(0,this.settings_baseUrl.length-1)),this.template_title_index=`(Unofficial) ${StatuspageDictionary.replaceableStringValue} Status`,this.template_title_status=`(Unofficial) Mini ${StatuspageDictionary.replaceableStringValue} Status`,this.template_title_components=`(Unofficial) ${StatuspageDictionary.replaceableStringValue} Status Components`,this.template_title_error=`Error - Invalid Route`,this.template_descrisption=`An unofficial website to monitor ${StatuspageDictionary.replaceableStringValue} status updates.`,this.template_descrisption_error=`An error has occured.`,this.template_incidents_none=`<div class="empty padding-none"><div class="font-36 margin-bottom">All good.</div><div class="font-12">Nothing to see here folks. Looks like ${StatuspageDictionary.replaceableStringValue} is up and running and has been stable for quite some time.<br /><br />Now get back to work!</div></div>`,null==document.getElementById("app")&&document.body.appendChild(StatuspageHTMLElements.AppHTMLElement),this.setTheme("loading").renderElement(StatuspageHTMLElements.LoadingHTMLElement)}setName(a){return this.site_name=a,this}getName(){return this.site_name}setDescription(a=null){return this.site_description=this.template_descrisption.replaceAll(StatuspageDictionary.replaceableStringValue,this.getName())+(null==a?"":" | "+a),this.setDescriptions()}getDescription(){return this.site_description}setTitle(a){return this.site_title=a.replace(StatuspageDictionary.replaceableStringValue,this.getName()),this.setTitles()}getTitle(){return this.site_title}setNameDescriptionTheme(a){return"status"in a&&this.setTheme(a.status.indicator),"components"in a&&this.setTheme(a.components[0].status),this.setName(a.page.name).setDescription("status"in a?a.status.description:null)}IndexHome(){console.log("IndexHome"),this.IndexHomeAsync().then()}async IndexHomeAsync(){if(this.setUrl(),this.settings_indexHomeSingleRequest){const a=await fetch(this.settings_baseUrl+"/api/v2/summary.json"),b=await a.json();this.setNameDescriptionTheme(b).renderElements([StatuspageHTMLElements.StatusHTMLElement(b),StatuspageHTMLElements.IncidentsHTMLElements(b)])}else{const b=await fetch(this.settings_baseUrl+"/api/v2/status.json"),c=await b.json(),d=await fetch(this.settings_baseUrl+"/api/v2/incidents.json"),e=await d.json();var a=[StatuspageHTMLElements.StatusHTMLElement(c),StatuspageHTMLElements.IncidentsHTMLElements(e,this.settings_previousDays)];this.setNameDescriptionTheme(c).renderElements(a)}this.setTitle(this.template_title_index)}ComponentsHome(){console.log("ComponentsHome"),this.ComponentsHomeAsync().then()}async ComponentsHomeAsync(){console.log("ComponentsHomeAsync");const a=await fetch(this.settings_baseUrl+"/api/v2/components.json"),b=await a.json();this.setNameDescriptionTheme(b).setTitle(this.template_title_components).renderElements(StatuspageHTMLElements.ComponentsHTMLElement(b))}StatusHome(){console.log("StatusHome"),this.StatusHomeAsync().then()}async StatusHomeAsync(){const a=await fetch(this.settings_baseUrl+"/api/v2/status.json"),b=await a.json();this.setNameDescriptionTheme(b).setTitle(this.template_title_status).renderElement(StatuspageHTMLElements.StatusHTMLElement(b,!0))}ErrorHome(){console.log("ErrorHome"),this.site_description=this.template_descrisption_error,this.setName(this.template_title_error).setTitle(this.template_title_error).setDescriptions().createMetaTag("robots","noindex").renderElement(StatuspageHTMLElements.ErrorHTMLElement)}clearRender(){return console.log("clearRender()"),document.getElementById("app").replaceChildren(),this}renderElements(a){if(console.log("renderElements()"),this.clearRender(),Array.isArray(a))for(var b of a)b instanceof Element&&document.getElementById("app").appendChild(b);return console.log("Success: renderElements()"),this}renderElement(a){return console.log("renderElement()"),a instanceof Element&&(this.clearRender(),document.getElementById("app").appendChild(a)),console.log("Success: renderElement()"),this}setMetaTag(a,b){let c=Array.from(document.getElementsByTagName("meta"));var d=c.find(b=>(b.hasAttribute("property")?b.getAttribute("property"):b.getAttribute("name"))==a);return d.setAttribute("content",b),this}getMetaTag(a){let b=Array.from(document.getElementsByTagName("meta"));return b.find(b=>(b.hasAttribute("property")?b.getAttribute("property"):b.getAttribute("name"))==a).getAttribute("content")}createMetaTag(a,b,c="name"){let d=Array.from(document.getElementsByTagName("meta"));var e=d.filter(b=>b.getAttribute(c)==a);if(0<e.length)return console.error("meta tag already exists"),this;var f=document.createElement("meta");return f.setAttribute(c,a),f.setAttribute("content",b),document.head.append(f),this}updateRichTest(a,b,c="WebApplication"){var d=Array.from(document.getElementsByTagName("script")).find(a=>a.hasAttribute("type")&&"application/ld+json"==a.getAttribute("type"));if(null==d)return this;var e=JSON.parse(d.innerHTML);if(Array.isArray(e)){var f=e.findIndex(a=>a["@type"]==c);e[f][a]=b}else e[a]=b;return d.innerHTML=JSON.stringify(e,null,4),this}setUrl(a=null){var b=null==a?window.location.href:a;return Array.from(document.getElementsByTagName("link")).find(a=>"canonical"==a.getAttribute("rel")).setAttribute("href",b),this.setMetaTag("og:url",b).updateRichTest("url",b)}setTitles(){return document.getElementsByTagName("title")[0].innerHTML=this.getTitle(),this.setMetaTag("twitter:title",this.getTitle()).setMetaTag("og:title",this.getTitle()).setMetaTag("application-name",this.getTitle()).setMetaTag("apple-mobile-web-app-title",this.getTitle()).updateRichTest("name",this.getTitle())}setDescriptions(){return this.setMetaTag("description",this.getDescription()).setMetaTag("og:description",this.getDescription()).setMetaTag("twitter:description",this.getDescription()).updateRichTest("description",this.getDescription())}setTheme(a="loading"){console.log(`setTheme()`);var b=StatuspageDictionary.MetaColors[a];return console.log(`status ${a}`),console.log(`hexColor ${b}`),this.setMetaTag("theme-color",b).setMetaTag("apple-mobile-web-app-status-bar-style",b)}}function Router(a,b=7,c=!0,d=!1){var e=new StatuspageHTML(a,b,c,d);try{var f=null!=location.host.match(/(spa|master|staging|[1-9A-Za-z-_]+)\.ghstatus\.pages\.dev/g),g=null!=location.host.match(/(githubstat.us|ghstatuspagehtml.b-cdn.net|ghstat.us)/g);navigator.onLine?g||f?"/"==location.pathname?e.IndexHome():"/components/"==location.pathname?e.ComponentsHome():"/status/"==location.pathname?e.StatusHome():e.ErrorHome():e.IndexHome():e.ErrorHome()}catch(a){console.error(a),e.ErrorHome()}}