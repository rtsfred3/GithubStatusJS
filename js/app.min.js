var metaColors={none:"#339966",minor:"#DBAB09",major:"#E25D10",critical:"#DC3545",unavailable:"#4F93BD",error:"#646464",maintenance:"#0366d6"},indicatorVals={resolved:"good",none:"good",minor:"minor",major:"major",critical:"critical",error:"error",maintenance:"maintenance"},indicatorMessages={resolved:"good",investigating:"minor",critical:"critical",maintenance:"maintenance"},baseURL="https://www.githubstatus.com";function setUp(){try{setInfo(baseURL+"/api/v2/status.json",Status),setInfo(baseURL+"/api/v2/incidents.json",Messages),document.getElementById("main").classList.remove("size-zero")}catch(e){setError()}}function setError(){setTheme("error"),document.getElementsByTagName("body")[0].innerHTML=errorMessage}function setInfo(e,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){4==this.readyState&&200==this.status?Array.isArray(t)?(t[0](JSON.parse(this.responseText)),t[1](JSON.parse(this.responseText))):t(JSON.parse(this.responseText)):4==this.readyState&&200!=this.status&&0<this.status&&(console.log(this.readyState,this.status),setError())},s.open("GET",e,!0),s.send()}function PSA_F(e){document.getElementById("psa").classList.remove("hidden"),document.getElementById("psa").innerHTML='<div class="center-status">'+e+"</div>"}function setTheme(e){for(var t=[2,18],s=document.getElementsByTagName("meta"),n=0;n<t.length;n++)s[t[n]].setAttribute("content",metaColors[e])}function Status(e){setTheme("unavailable"),document.getElementById("mainStatus").classList.remove("unavailable"),document.getElementById("mainStatus").innerHTML='<span class="center-status">'+indicatorVals[e.status.indicator].toUpperCase()+"</span>",document.getElementById("mainStatus").classList.add("status-color"),document.getElementById("mainStatus").classList.add(e.status.indicator.toLowerCase()),setTheme(e.status.indicator)}function Messages(e){var t={month:"short",day:"numeric",hour:"numeric",minute:"numeric"},s=new Date;s.setDate(s.getDate()-7);var n=e.incidents.filter(function(e){return new Date(e.created_at)>s});if(0==n.length)document.getElementById("messages").innerHTML='<div class="empty padding-none"><div class="font-36 margin-bottom">All good.</div><div class="font-12">Nothing to see here folks. Looks like GitHub is up and running and has been stable for quite some time.<br /><br />Now get back to work!</div></div>';else{for(var a="",i=0;i<n.length&&!(new Date(n[i].created_at)<s);i++)if(0<n[i].incident_updates.length)for(var o=0;o<n[i].incident_updates.length;o++){var r="resolved"==n[i].incident_updates[o].status||"none"==n[i].impact?"good":n[i].impact;null==r&&(r=indicatorMessages[n[i].incident_updates[o].status]),a+='<div class="status-box '+r+'-message"><span class="message-status"><div class="right">'+r+"</div></span></div>";var d=new Date(e.incidents[i].incident_updates[o].created_at).toLocaleDateString("en-US",t);"do.githubstat.us"==location.hostname&&(t={month:"short",day:"2-digit",hour:"numeric",minute:"numeric"},r=new Date(e.incidents[i].incident_updates[o].created_at),r=Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours()+r.getTimezoneOffset()/60,r.getUTCMinutes(),r.getUTCSeconds()),d=new Date(r).toLocaleDateString("en-US",t)+" UTC"),d='<span class="date empty">'+d+"</span>",a+='<div class="text-margin">'+e.incidents[i].incident_updates[o].body+"<br />"+d+"</div>"}document.getElementById("messages").innerHTML=a}}
