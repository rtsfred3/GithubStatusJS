var metaColors={none:"#339966",minor:"#F1C40F",major:"#FF9900",critical:"#990000",unavailable:"#4F93BD",error:"#646464"},indicatorVals={resolved:"good",none:"good",minor:"minor",major:"major",critical:"critical",error:"error"},indicatorMessages={resolved:"good",investigating:"minor"};function setUp(){try{document.getElementById("main").classList.remove("size-zero"),setInfo("https://www.githubstatus.com/api/v2/status.json",Status),setInfo("https://www.githubstatus.com/api/v2/incidents.json",Messages)}catch(t){setError()}}function setError(){setTheme("error"),document.getElementsByTagName("body")[0].innerHTML=errorMessage}function setInfo(t,e){var s=new XMLHttpRequest;s.onreadystatechange=function(){4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):4==this.readyState&&200!=this.status&&0<this.status&&(console.log(this.readyState,this.status),setError())},s.open("GET",t,!0),s.send()}function setTheme(t){for(var e=[2,18],s=document.getElementsByTagName("meta"),a=0;a<e.length;a++)s[e[a]].setAttribute("content",metaColors[t])}function Status(t){setTheme("unavailable"),document.getElementById("mainStatus").classList.remove("unavailable-color"),document.getElementById("mainStatus").innerHTML='<span class="center-status">'+indicatorVals[t.status.indicator].toUpperCase()+"</span>",document.getElementById("mainStatus").classList.add("status-color"),document.getElementById("mainStatus").classList.add(t.status.indicator.toLowerCase()+"-color"),setTheme(t.status.indicator)}function Messages(t){var e={month:"short",day:"numeric",hour:"numeric",minute:"numeric"},s=new Date;s.setDate(s.getDate()-7);var a=t.incidents.filter(function(t){return new Date(t.created_at)>s});if(0!=a.length){for(var n="",i=0;i<a.length&&!(new Date(a[i].created_at)<s);i++)if(0<a[i].incident_updates.length)for(var o=0;o<a[i].incident_updates.length;o++){var r="resolved"==a[i].incident_updates[o].status||("none"==a[i].impact||a[i].impact);n+='<div class="status-box '+(r=indicatorMessages[a[i].incident_updates[o].status])+'"><span class="message-status"><div class="right">'+r+"</div></span></div>";var d=new Date(t.incidents[i].incident_updates[o].created_at).toLocaleDateString("en-US",e);if("do.githubstat.us"==location.hostname){e={month:"short",day:"2-digit",hour:"numeric",minute:"numeric"};var c=new Date(t.incidents[i].incident_updates[o].created_at);c=Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours()+c.getTimezoneOffset()/60,c.getUTCMinutes(),c.getUTCSeconds()),d=new Date(c).toLocaleDateString("en-US",e)+" UTC"}d='<span class="date empty">'+d+"</span>",n+='<div class="text-margin">'+t.incidents[i].incident_updates[o].body+"<br />"+d+"</div>"}document.getElementById("messages").innerHTML=n}else document.getElementById("messages").innerHTML='<div class="empty padding-none"><div class="font-36 margin-bottom">All good.</div><div class="font-12">Nothing to see here folks. Looks like GitHub is up and running and has been stable for quite some time.<br /><br />Now get back to work!</div></div>'}
